.TH AMRECOVER 8 "29 November 1996" "Alan M. McIvor" "AMANDA INDEX" \" -*- nroff -*-
.SH NAME
amrecover \- Amanda index database browser
.SH SYNOPSIS
.B amrecover
[\-C <config>] [\-s <index-server>]
.SH DESCRIPTION
.B amrecover
is for browsing through the database of AMANDA index files to determine
which files to recover. Eventually, it will allow automated recovery of
those files.
.SH OPTIONS
.TP
.I "\-C <config>"
Which AMANDA configuration to start with. A suitable default will have
been set as part of the installation.
.TP
.I "\-s <index-server>"
The name of the host that runs the index daemon. A suitable default will have
been set as part of the installation.
.SH COMMANDS
When started, the program connects with the index server, and then
presents a command line prompt. Usage is similiar to a ftp client. The
GNU readline library is used to provide a command line history and editing.
The purpose of browsing the database is to build up a
.I restore list
of files to be extracted from the backup system.
The following commands are available.
.TP
sethost <hostname>
Specifies which host to look at backup files for. The default is the
local host.
.TP
setdate YYYY-MM-DD
Set the date. File listing commands, etc, return information only on
files from backup tapes for this day, for the day before with the next
lower dump level, and so on, until the most recent level 0 dump on or before
the specified date is encountered. For example, if 1996-07-01 was a
level 0 dump, 1996-07-02 through 1996-07-05 were level 1, and
1996-07-06 through 1997-07-08 were level 2, then if 1997-07-08 is
specified, the files from the following days would be used:
1997-07-08, 1997-07-05, and 1997-07-01. Only the most recent version
of a file would be presented. The following
.I abbreviated
date specifications are also accepted: 
.I --MM-DD
for dates
in the current year, and 
.I ---DD
for dates in the current month of the
current year.
.TP
setdisk <disk name> [<mount point>]
Sets which disk to consider. It can only be set after the host is set with
.I sethost.
The 
.I disk name
is the device name as specified in the amanda configuration file. The
disk must be local to the host. If the optional 
.I mount point
is not specified, all pathnames will be relative to the (unknown)
mount point instead of full
pathnames.
.TP
history
Show the backup history of the current disk. The dates and levels of
each backup are displayed.
.TP
cd dir
Change the current working directory to
.I dir.
If the mount point was specified, then this can be a full pathname or
relative to the current working directory. If the mount point was not
specified, then paths are relative to the mount point if the start
with "/", otherwise they are relative to the current working directory.
.TP
ls
List the contents of the current working directory. See the
description of the
.I setdate
command for how the view of the
directory is built up. The tape name, backup level, and date are shown
for each file.
.TP
add  path1 [path2 ...]
Add the specified files to the restore list.
.TP
delete  path1 [path2 ...]
Delete the specified files from the restore list.
.TP
list [path]
List the current contents of the restore list. If an optional file
name is specified, then the restore list is written to that file. This
can then be used to manually extract the files from the tape library.
.TP
clear
Clears the restore list.
.TP
pwd
Prints the current working directory in the virtual file system.
.TP
quit
Close connection to server and exit.
.TP
exit
Close connection to server and exit.
.TP
lpwd
Print the current working directory on the local file system.
.TP
lcd path
Change the current working directory on the local file system to 
.I path.
.SH SEE ALSO
amanda(8), readline(3)
.SH AUTHOR
Alan M. McIvor <alan@kauri.auck.irl.cri.nz>
