.TH AMTOC 8 
.SH NAME 
amtoc \- generate TOC (Table Of Content) for an amanda run
.SH SYNOPSIS
.B
.I amtoc
[-a] [-f file] [-s subs] [--] logfile

.br
.SH DESCRIPTION
.I Amtoc 
generate a TOC for an amanda run.
It's a perl script (If you don't have perl, install it first!).

.SH OPTIONS
.TP
.B \-a
output file name defined to `label_of_the_tape`.toc. In the same directory of logfile.
.TP
.B \-f file
write output to file ('-' for stdout)
.TP 
.B \-s subs
output file name is evaluated from subs, with $_ set to `label_of_the_tape`.  '-a' option is equiv to -s 's/\\$/.toc/'
.TP
.B \-\-
last option, next parameter used as logfile
.TP
.B logfile
use '-' for stdin.

.SH OUTPUT FORMAT
4 fields separated by two spaces. exemple:

.RS
#  Server:/partition  level  size[Kb]
.br
0  all-26.janvier.1999:  -  -
.br
1  cuisun49:/cuisun49/home  0  288
.br
2  cuisun31:/cuisun31/home  0  29216
.br
  ...
.br
51  total:  -  35796768
.br
.RE

.SH USAGE
The easiest way to use it, is to patch
.I amdump
, to call
.I amtoc
just before
.I amreport
:

.RS  
$sbindir/amtoc -a $logdir/log >/dev/null 2>&1
.RE  

which generate $logdir/`tape_label`.toc.
You may also want to call
.I amtoc
after an
.I amflush.



.SH SEE ALSO
.I amanda
,
.I perl

.SH AUTHOR
Nicolas MAYENCOURT <Nicolas.Mayencourt@cui.unige.ch>
.br
University of Geneva/Switzerland
